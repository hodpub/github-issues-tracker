<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Issues Tracker - By Repository</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>üîç GitHub Issues Tracker</h1>
    </header>
    
    <div id="scrollable-content">
        <div id="hodpub-ad">
            <div class="ad-label">Advertisement</div>
            <a href="https://hodpub.com/shop" target="_blank" rel="noopener noreferrer">
                <img id="hodpub-ad-img" alt="HodPub" src="hodpub-ad.webp">
            </a>
        </div>
        
        <div class="view-switcher">
            <a href="index.html" class="view-btn active">By Repository</a>
            <a href="by-type.html" class="view-btn">By Type</a>
            <a href="https://ko-fi.com/cussa" target="_blank" rel="noopener noreferrer" class="view-btn kofi-btn">‚òï Support on Ko-fi</a>
            <button id="helpBtn" class="view-btn help-btn">‚ùì Help</button>
            <button id="reactHelpBtn" class="view-btn react-help-btn">üëç How to upvote</button>
        </div>
        
        <div class="config-section collapsed" id="reposSection">
            <div class="config-header" id="reposToggle">
                <div class="config-title">
                    <span class="config-collapse-icon">‚ñº</span>
                    <span>Repository Configuration</span>
                </div>
            </div>
            <div class="config-content">
                <div class="input-group">
                    <label for="repos">GitHub Repositories (one per line, format: owner/repo)</label>
                    <textarea id="repos" placeholder="owner/repo&#10;owner2/repo2">hodpub/github-issues-tracker</textarea>
                </div>
                
                <div class="input-group" id="tokenSection">
                    <label for="token">
                        GitHub Personal Access Token (optional for public repos, required for private)
                        <a href="https://github.com/settings/tokens" target="_blank" rel="noopener noreferrer" class="token-link">Get token ‚ÜóÔ∏è</a>
                    </label>
                    <input type="password" id="token" placeholder="ghp_...">
                    <div class="token-permissions">
                        <div class="token-permissions-header" id="permissionsToggle">
                            <span class="permission-icon collapsed">‚ñº</span>
                            <span>Required Permissions</span>
                        </div>
                        <div class="token-permissions-content hidden" id="permissionsContent">
                            <div class="token-permission-item">
                                <strong>public_repo</strong> - Access public repositories (required)
                            </div>
                            <div class="token-permission-item">
                                <strong>repo</strong> - Full control of private repositories (optional, only if you need private repos)
                            </div>
                            <p>
                                Without a token: 60 requests/hour<br>
                                With a token: 5,000 requests/hour
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="button-row">
                    <button id="loadBtn">Load Issues & PRs</button>
                </div>
                <div class="button-row-secondary">
                    <button id="clearCacheBtn">Clear Cache</button>
                    <button id="shareBtn">üîó Share URL</button>
                </div>
                <div class="cache-status-container">
                    <div class="cache-status-header">
                        <div id="cacheStatus">No cached data</div>
                        <label>
                            <input type="checkbox" id="forceRefresh">
                            <span>Force refresh</span>
                        </label>
                    </div>
                    <div id="cacheDetails"></div>
                </div>
            </div>
        </div>

        <div id="error-container"></div>

    <div id="loading" class="loading" style="display: none;">
        Loading repositories...
    </div>

    <div class="main-content">
        <div class="swimlanes-wrapper">
            <div id="swimlanes" class="swimlanes-container"></div>
        </div>
        
        <div id="helpPanel" class="iframe-panel">
            <div class="iframe-header">
                <span class="iframe-title">üìñ User Guide</span>
                <button class="close-iframe" id="closeHelp" title="Close">√ó</button>
            </div>
            <div class="iframe-container" id="helpContent"></div>
        </div>
        
        <div id="iframePanel" class="iframe-panel">
            <div class="iframe-header">
                <span class="iframe-title" id="iframeTitle">Issue Details</span>
                <button class="close-iframe" id="closeIframe" title="Close">√ó</button>
            </div>
            <div class="iframe-container" id="issueDetails">
                <div class="loading" id="detailsLoading" style="display: none;">Loading issue details...</div>
                <div id="detailsContent"></div>
            </div>
        </div>
    </div>

    <footer>
        <div class="footer-credits">
            Developed by <a href="https://hodpub.com" target="_blank" rel="noopener noreferrer">Hod Publishing</a> | <a href="https://github.com/cussa" target="_blank" rel="noopener noreferrer">Cussa Mitre</a>
        </div>
        <a href="https://github.com/hodpub/github-issues-tracker" target="_blank" rel="noopener noreferrer">
            View on GitHub
        </a>
    </footer>
</div>

<div id="analyticsConsent" class="analytics-consent">
        <div class="analytics-consent-content">
            <h3>üìä Help Us Improve</h3>
            <p>
                We'd like to collect anonymous visitor statistics to understand usage patterns. 
                This helps us prioritize improvements. We only track page views‚Äîno personal data or repository names.
            </p>
            <div class="analytics-actions">
                <button id="analyticsDecline" class="analytics-btn">No Thanks</button>
                <button id="analyticsAccept" class="analytics-btn">Accept</button>
            </div>
        </div>
    </div>

<script type="module" src="main.mjs"></script>
</body>
</html>