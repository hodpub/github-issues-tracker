<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Issues Tracker - By Type</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>üîç GitHub Issues Tracker</h1>
    </header>
    
    <div id="scrollable-content">
        <div id="hodpub-ad" style="margin: 0 auto 35px auto; text-align: center; max-width: 500px;">
            <div style="font-size: 10px; color: #8b949e; text-transform: uppercase; margin-bottom: 4px; letter-spacing: 0.5px;">Advertisement</div>
            <a href="https://hodpub.com/shop" target="_blank" rel="noopener noreferrer">
                <img id="hodpub-ad-img" alt="HodPub" style="width: 100%; max-width: 500px; height: auto; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: block;" src="hodpub-ad.webp">
            </a>
        </div>
        
        <div class="view-switcher">
            <a href="index.html" class="view-btn">By Repository</a>
            <a href="by-type.html" class="view-btn active">By Type</a>
            <a href="https://ko-fi.com/cussa" target="_blank" rel="noopener noreferrer" class="view-btn" style="background: #13C3FF; border-color: #13C3FF; color: white;">‚òï Support on Ko-fi</a>
            <button id="helpBtn" class="view-btn" style="background: #6e7681; border-color: #6e7681;">‚ùì Help</button>
        </div>
        
        <div class="config-section collapsed" id="reposSection">
            <div class="config-header" id="reposToggle">
                <div class="config-title">
                    <span class="config-collapse-icon">‚ñº</span>
                    <span>Repository Configuration</span>
                </div>
            </div>
            <div class="config-content">
                <div class="input-group">
                    <label for="repos">GitHub Repositories (one per line, format: owner/repo)</label>
                    <textarea id="repos" placeholder="owner/repo&#10;owner2/repo2">hodpub/github-issues-tracker</textarea>
                </div>
                
                <div class="input-group" id="tokenSection" style="margin-top: 15px;">
                    <label for="token">
                        GitHub Personal Access Token (optional for public repos, required for private)
                        <a href="https://github.com/settings/tokens" target="_blank" rel="noopener noreferrer" style="color: #58a6ff; text-decoration: none; margin-left: 8px;">Get token ‚ÜóÔ∏è</a>
                    </label>
                    <input type="password" id="token" placeholder="ghp_...">
                    <div class="token-permissions">
                        <div class="token-permissions-header" id="permissionsToggle">
                            <span class="permission-icon collapsed">‚ñº</span>
                            <span>Required Permissions</span>
                        </div>
                        <div class="token-permissions-content hidden" id="permissionsContent">
                            <div class="token-permission-item">
                                <strong>public_repo</strong> - Access public repositories (required)
                            </div>
                            <div class="token-permission-item">
                                <strong>repo</strong> - Full control of private repositories (optional, only if you need private repos)
                            </div>
                            <p style="margin-top: 10px; font-size: 12px; color: #8b949e;">
                                Without a token: 60 requests/hour<br>
                                With a token: 5,000 requests/hour
                            </p>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 15px; display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap;">
                    <button id="loadBtn" style="flex: 1 1 100%; max-width: 400px;">Load Issues & PRs</button>
                </div>
                <div style="margin-top: 10px; display: flex; align-items: center; justify-content: center; gap: 10px; flex-wrap: wrap;">
                    <button id="clearCacheBtn" style="background: #6e7681; flex: 0 0 auto;">Clear Cache</button>
                    <button id="shareBtn" style="background: #238636; flex: 0 0 auto;">üîó Share URL</button>
                </div>
                <div style="margin-top: 10px; padding: 8px 12px; background: #161b22; border-radius: 6px; font-size: 12px; color: #8b949e;">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                        <div id="cacheStatus" style="cursor: pointer; user-select: none; flex: 1;">No cached data</div>
                        <label style="display: flex; align-items: center; gap: 6px; cursor: pointer; white-space: nowrap;">
                            <input type="checkbox" id="forceRefresh" style="cursor: pointer;">
                            <span>Force refresh</span>
                        </label>
                    </div>
                    <div id="cacheDetails" style="display: none; margin-top: 10px; padding-top: 10px; border-top: 1px solid #30363d;"></div>
                </div>
            </div>
        </div>

        <div id="error-container"></div>
    </header>

    <div id="loading" class="loading" style="display: none;">
        Loading repositories...
    </div>

    <div class="main-content">
        <div class="swimlanes-wrapper">
            <div id="swimlanes" class="swimlanes-container"></div>
        </div>
        
        <div id="helpPanel" class="iframe-panel">
            <div class="iframe-header">
                <span class="iframe-title">üìñ User Guide</span>
                <button class="close-iframe" id="closeHelp" title="Close">√ó</button>
            </div>
            <div class="iframe-container" id="helpContent"></div>
        </div>
        
        <div id="iframePanel" class="iframe-panel">
            <div class="iframe-header">
                <span class="iframe-title" id="iframeTitle">Issue Details</span>
                <button class="close-iframe" id="closeIframe" title="Close">√ó</button>
            </div>
            <div class="iframe-container" id="issueDetails">
                <div class="loading" id="detailsLoading" style="display: none;">Loading issue details...</div>
                <div id="detailsContent"></div>
            </div>
        </div>
    </div>

    <div id="analyticsConsent" class="analytics-consent" style="display: none;">
        <div class="analytics-consent-content">
            <h3 style="margin: 0 0 12px 0; font-size: 18px; color: #e6edf3;">üìä Help Us Improve</h3>
            <p style="margin: 0 0 16px 0; color: #8b949e; line-height: 1.5;">
                We'd like to collect anonymous visitor statistics to understand usage patterns. 
                This helps us prioritize improvements. We only track page views‚Äîno personal data or repository names.
            </p>
            <div style="display: flex; gap: 10px; justify-content: flex-end; flex-wrap: wrap;">
                <button id="analyticsDecline" class="analytics-btn" style="background: #6e7681; border-color: #6e7681;">No Thanks</button>
                <button id="analyticsAccept" class="analytics-btn" style="background: #238636; border-color: #238636;">Accept</button>
            </div>
        </div>
    </div>

    <footer style="text-align: center; padding: 20px; margin-top: 40px; border-top: 1px solid #30363d; color: #8b949e; font-size: 14px;">
        <div style="margin-bottom: 10px;">
            Developed by <a href="https://hodpub.com" target="_blank" rel="noopener noreferrer" style="color: #58a6ff; text-decoration: none;">Hod Publishing</a> | <a href="https://github.com/cussa" target="_blank" rel="noopener noreferrer" style="color: #58a6ff; text-decoration: none;">Cussa Mitre</a>
        </div>
        <a href="https://github.com/hodpub/github-issues-tracker" target="_blank" rel="noopener noreferrer" style="color: #58a6ff; text-decoration: none;">
            View on GitHub
        </a>
    </footer>
    </div>

    <script type="module" src="by-type.mjs"></script>
</body>
</html>
